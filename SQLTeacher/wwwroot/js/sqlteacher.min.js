function getScores(){return $.ajax({url:`/api/scores`,type:"GET"})}function putScoresInTable(){getScores().then(n=>{n.forEach(n=>{getCell(n.peopleId,n.querieId)[0].style.backgroundColor=n.success?"rgba(76, 175, 80, 0.4)":"rgba(244 ,67, 54, 0.4)"})})}function getCell(n,t){var n=$("#people"+n).index(),t=$("#query"+t);return t.find("td").eq(n)}var pinCodeValid=!1;$(".isActiveCheckBox").change(n=>{let t=n.currentTarget.checked;const r=$(".isActiveCheckBox");for(const n of r)n.checked=!1;n.currentTarget.checked=t;const i=n.currentTarget.parentElement.parentElement.getElementsByClassName("colId")[0].innerText,u=$("input[name=__RequestVerificationToken]").val(),f=JSON.stringify({Id:i,IsActive:t,__RequestVerificationToken:u});$.ajax({url:`/exercises/activate/${i}`,type:"POST",data:f,contentType:"application/json; charset=utf-8",dataType:"json",success:function(){},error:function(n){console.log(n)}})});$(".submitQuery").click(n=>{const t=n.currentTarget.parentElement.parentElement.getElementsByClassName("queryResponse")[0],i=t.value,r=n.currentTarget.parentElement.parentElement.getElementsByClassName("colId")[0].innerText,u=$("#pinCode")[0].value,f=JSON.stringify({query:i,pinCode:u});$.ajax({url:`/api/checkAnswer/${r}`,type:"POST",data:f,contentType:"application/json; charset=utf-8",dataType:"json",success:n=>{n?(t.classList.remove("inputError"),t.classList.add("inputSuccess")):(t.classList.remove("inputSuccess"),t.classList.add("inputError"))},error:n=>{console.log(n)}})});$("#pinCode").keyup(n=>{const t=n.currentTarget.value;if(pinCodeValid=t.length==4,pinCodeValid){const i=JSON.stringify({pinCode:t});$.ajax({url:`/api/checkPinCode`,type:"POST",data:i,contentType:"application/json; charset=utf-8",dataType:"json",success:t=>{pinCodeValid=t,t?(n.currentTarget.classList.remove("inputError"),n.currentTarget.classList.add("inputSuccess")):(n.currentTarget.classList.remove("inputSuccess"),n.currentTarget.classList.add("inputError"))},error:n=>{console.log(n),pinCodeValid=!1}})}else n.currentTarget.classList.remove("inputSuccess"),n.currentTarget.classList.add("inputError");for(let n of $(".submitQuery").toArray())input=n.parentElement.parentElement.getElementsByClassName("queryResponse")[0],n.disabled=!(pinCodeValid&&input.value.trim()!="")});$(".queryResponse").keyup(n=>{n.currentTarget.classList.remove("inputError");n.currentTarget.classList.remove("inputSuccess");const t=n.currentTarget.parentElement.parentElement.getElementsByClassName("submitQuery")[0];t.disabled=!(n.currentTarget.value.trim()!=""&&pinCodeValid)});document.getElementById("examInfosPage")&&(putScoresInTable(),window.setInterval(()=>putScoresInTable(),5e3));$("#addQuestion").click(()=>{let n=$("#hidden-template").html(),t=$("#questionsList");t.append(n)});$("#submitButton").click(()=>{let n=$("#questionsList").children(".question"),t=$("#Title")[0].value,i=$("#DbScript")[0].value,r=JSON.stringify({title:t,dbScript:i});$.ajax({url:`/exercises/create`,type:"POST",data:r,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){let i=[];n.toArray().forEach((n,r)=>{r++,i.push({statement:n.children[1].value,formulation:n.children[3].value,rank:r,exerciseId:t})});$.ajax({url:`/queries/CreateFromExercise`,type:"POST",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n&&(window.location.href="/exercises")},error:function(n){console.log(n)}})},error:function(n){console.log(n)}})});